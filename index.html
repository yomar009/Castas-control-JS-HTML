<!DOCTYPE html>
<html>
<head>
    <title>Registro de Muestras</title>
</head>
<body>
    <h1>Registro de Muestras</h1>
    
    <p>Por favor, ingresa el número de muestras (N) y el número de muestras tomadas (M).</p>
    
    <label for="n">Número de columnas (N): </label>
    <input type="number" id="n"><br><br>
    
    <label for="m">Número de filas (M): </label>
    <input type="number" id="m"><br><br>
    
    <button onclick="crearTabla()">Crear Tabla</button>
    
    <div id="tabla-container"></div>
    
    <button onclick="guardarDatos()">Guardar Datos</button>
    
    <div id="resultado"></div>
    
    <script>
        let datos = []; // Array para almacenar los datos
        let promediosFila = []; // Array para almacenar los promedios de cada fila
        let rangos = []; // Array para almacenar los rangos de cada fila

        function crearTabla() {
            const n = parseInt(document.getElementById('n').value);
            const m = parseInt(document.getElementById('m').value);
            
            if (isNaN(n) || isNaN(m)) {
                alert('Por favor, ingresa números válidos para N y M.');
                return;
            }
            
            const tablaContainer = document.getElementById('tabla-container');
            
            // Crear la tabla
            const tabla = document.createElement('table');
            for (let i = 0; i < m; i++) {
                const fila = document.createElement('tr');
                for (let j = 0; j < n; j++) {
                    const celda = document.createElement('td');
                    const input = document.createElement('input');
                    input.type = 'number';
                    celda.appendChild(input);
                    fila.appendChild(celda);
                }
                tabla.appendChild(fila);
            }
            
            tablaContainer.innerHTML = ''; // Limpiar cualquier tabla anterior
            tablaContainer.appendChild(tabla);
        }

        function guardarDatos() {
            const tabla = document.querySelector('table');
            const filas = tabla.querySelectorAll('tr');
            datos = []; // Reiniciar el array de datos
            promediosFila = []; // Reiniciar el array de promedios de fila
            rangos = []; // Reiniciar el array de rangos

            filas.forEach((fila, i) => {
                const celdas = fila.querySelectorAll('td');
                datos[i] = []; // Crear un array para cada fila
                celdas.forEach((celda, j) => {
                    const input = celda.querySelector('input');
                    const valor = parseFloat(input.value || 0); // Guardar el valor como número
                    datos[i][j] = valor;
                });
                // Calcular el promedio de cada fila y guardarlos
                const promedioFila = datos[i].reduce((total, valor) => total + valor, 0) / datos[i].length;
                promediosFila.push(promedioFila);
                
                // Calcular el rango de cada fila y guardarlos
                const max = Math.max(...datos[i]);
                const min = Math.min(...datos[i]);
                const rangoFila = max - min;
                rangos.push(rangoFila);
            });

            // Calcular el promedio de los rangos
            const promedioRangos = rangos.reduce((total, rango) => total + rango, 0) / rangos.length;

            // Mostrar los datos en la página
            const resultadoContainer = document.getElementById('resultado');
            resultadoContainer.innerHTML = "Promedios de cada fila: " + JSON.stringify(promediosFila) + "<br>Rangos de cada fila: " + JSON.stringify(rangos) + "<br>Promedio de los rangos: " + promedioRangos;
        }
    </script>
</body>
</html>
